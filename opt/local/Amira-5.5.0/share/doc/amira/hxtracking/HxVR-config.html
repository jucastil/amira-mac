<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
<head><title>Amira Online Help</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="stylesheet" href="../Amira.css" type="text/css" />
<script type="text/javascript" src="../MathJax/MathJax.js?config=default.js"></script>
</head>
<body lang="en">


<p></p>
<h2><a name="A1">11.9 Config File Reference</a></h2>
<p>An <font face="helvetica">Virtual Reality Option</font> config file is an Open Inventor file with a .cfg extension containing one or more
SoScreen <em>nodes</em> (one for each screen of the VR system), optional nodes 
SoTracker (containing information about the tracking system) and 
SoVRProperty (containing general information), as well as 
optional Open Inventor nodes (containing possibly a visual representation of the room).</p>
<p>In principle two different configurations are distinguished. A "flat
screen" configuration defines a virtual big 2D screen, while a true
"immersive" configuration defines multiple screens in a non-planar configuration. For a flat
screen configuration, the fields <em>tileOrigin</em> and <em>tileSize</em> (see below) are used,
while for an immersive configuration the fields <em>lowerLeft</em>, <em>lowerRight</em>,
<em>upperRight</em>, and <em>upperLeft</em> are used. For a tiled configuration, ordinary 2D
mouse interaction works, while an immersive configuration usually requires
a tracking system.</p>
<p>By default, the list of available config files (*.cfg) is generated by
looking in the <tt>AMIRA_ROOT</tt>/share/config/vr 
and <tt>AMIRA_LOCAL</tt>/share/config/vr directories. The user can define an 
<tt>AMIRA_VR_CONFIGS_PATH</tt> &nbsp;environment variable to use a different location at 
start-up. Then, at runtime, the list can be further changed or updated by 
using the <em>Change Configs Path...</em> item in the VR menu.</p>
<p><br />

</p>
<h4><a name="A2">SoScreen</a></h4>
<p>An SoScreen node can contain the fields detailed below. The field content 
type is given inside brackets using Open Inventor conventions, 
ie. SoSFVec3f stands for 'a vector of 3 float values', SoSFRotation is a rotation defined with 4 values represents an axis of rotation followed by the amount of right-handled rotation about that axis, in radians. For example, a 180 degree rotation about the Y axis is :
 0 1 0 3.12159265</p>
<p>
</p>
<ul><li>[SoSFString] name "Vertical screen"<br />

 The name of the screen (not used internally)</li><li>[SoSFVec3f] lowerLeft 0 0 0<br />

 The coordinates of the lower left corner of the screen. Any
 right-handed coordinate system can be used. It does not matter
 in which units the screen corners are defined because the
 transformation between the screen coordinates and the tracker
 coordinates is computed automatically when calibrating the
 tracking system. Just make sure to respect the following 
 limitations: Do not use negative coordinates, and check the 
 minimal screen dimension is superior to 10, whatever the unit 
 is (centimeters/inches/...), which means in particular that
 you can not use a [0-1] range to map the screen coordinates.</li><li>[SoSFVec3f] lowerRight 180 0 0<br />

 The coordinates of the lower right corner of the screen.</li><li>[SoSFVec3f] upperRight 180 110 0<br />

 The coordinates of the upper right corner of the screen.</li><li>[SoSFVec3f] upperLeft 0 110 0<br />

 The coordinates of the upper left corner of the screen.</li><li>[SoSFString] display ":0.1"<br />

 Specifies on which X display the screen should be rendered. On a
 multi-pipe machine such as an SGI Onyx, either different X servers
 may run on the different pipes, or there may be one X server with
 multiple screens. Depending on the actual configuration either
 ":1.0" or ":0.1" should be specified in order to enable multi-pipe
 rendering for the second screen. If this field is omitted, the
 window will be opened on the same display as the <font face="helvetica">Amira</font> user
 interface (determined by the value of the DISPLAY environment
 variable or by the -display command line option).</li><li>[SoSFString] hostname<br />

 This field is required if <font face="helvetica">Virtual Reality Option</font> will be run in cluster mode.
 It specifies on which node of a graphics cluster the particular
 screen should be rendered. The hostname can either be specified
 as a name or as a numeric IP address. 
 See <a class="link" href="HxVR-cluster.html#A1">section 11.3 (Using <font face="helvetica">Virtual Reality Option</font> on a cluster)</a>.</li><li>[SoSFVec2f] channelOrigin 0.0 0.0<br />

 Specifies the position of the upper left corner of the graphics
 window in relative coordinates. (0,0) is the upper left corner
 of the desktop, (1,1) is the lower right corner of the desktop.</li><li>[SoSFVec2f] channelSize 0.5 1.0<br />

 Specifies the size of graphics window in relative coordinates.
 The size of the whole desktop is (1,1). In order to create a
 window covering the left half of the desktop, <em>channelOrigin</em>
 should be (0,0) and <em>channelSize</em> should be (0.5,1).</li><li>[SoSFVec2f] tileOrigin 0.0 0.0<br />

 This field is used in the case of a 2D tiled display instead of the
 fields <em>lowerLeft</em>, <em>lowerRight</em>, <em>upperRight</em>, and <em>upperLeft</em>. It specifies the origin of a rectangular part of a
 virtual big screen which should be rendered in the graphics window.
 The origin can be any point between (0,0) and (1,1). Here (0,0)
 denotes the LOWER left corner of the virtual big screen, and (1,1)
 denotes the UPPER right corner.</li><li>[SoSFVec2f] tileSize 1.0 1.0<br />

 This field is used in the case of a 2D tiled display instead of the
 fields <em>lowerLeft</em>, <em>lowerRight</em>, <em>upperRight</em>, and <em>upperLeft</em>. It specifies the size of a rectangular part of a
 virtual big screen which should be displayed in the graphics
 window. The size can be any value between (0,0) and (1,1).</li><li>[SoSFEnum] cameraMode [
MONOSCOPIC | LEFT_VIEW | RIGHT_VIEW | ACTIVE_STEREO ]<br />

 This field specifies the camera mode used for the screen. The
 default is MONOSCOPIC. The values LEFT_VIEW and RIGHT_VIEW are used
 for passive stereo applications. If ACTIVE_STEREO is specified, the
 window is opened in active stereo mode by default.</li><li>[SoSFEnum] backgroundMode [
BG_AS_IS | BG_LOWER | BG_UPPER | BG_REVERSE ]<br />

 This field affects how the default <font face="helvetica">Amira</font> gradient
 background is rendered on the screen. If BG_LOWER or BG_UPPER
 is specified, a uniform background with either the lower or
 upper color of the standard gradient background is used. This
 is useful for the floor or ceiling of a CAVE.</li><li>[SoSFInt32] threadGroup<br />

Screens with different thread groups are rendered in parallel
 using multiple threads, provided <font face="helvetica">Amira</font> has been started with the
 -mt command line option or the environment variable
 <tt>AMIRA_MULTITHREAD</tt> &nbsp;has been set. 
 If the same thread group is used
 for two different screens, these screens will always be rendered
 one after the other. 
 Note that for all common current graphics architectures it makes no sense 
 to render multiple windows on the same pipe in parallel. Typically, this 
 even implies a significant performance decrease. 
 Usually, screens being rendered on the same
 pipe (same display but different <em>channelOrigin</em> or <em>channelSize</em>)
 should be assigned the same thread group.
 Thread group and -mt command line option are only relevant on multipipe systems 
 and do not apply to cluster systems.</li><li>[SoMFFloat] softEdgeOverlap<br />

 This field is used for soft-edge blending. It should contain
 exactly four floating-point values, indicating the size of the
 soft-edge region on the left, right, bottom, and top border of
 the screen relative to the total width or height of the screen.
 For example, in order to specify a 25% soft-edge at the right border,
 <em>softEdgeOverlap</em> should be [ 0.0, 0.25, 0.0, 0.0 ].</li><li>[SoMFFloat] softEdgeGamma<br />

 This field is used for soft-edge gamma correction. It should
 contain exactly four floating-point values, indicating the gamma
 value of the soft-edge region at the left, right, bottom, and
 top border of the screen. A gamma value of 1 means, that image
 intensity is linearly faded out to black. For most projectors,
 gamma values bigger than 1 are required to achieve good results.
 The default gamma value for all borders is 1.2.</li>
</ul><p></p>
<p></p>
<h4><a name="A3">SoTracker</a></h4>
<p>An SoTracker node contains information about the tracking system. Usually
it is not necessary to define an SoTracker node for a "tiled"
configuration, but only for true VR configurations which make use of
the fields <em>lowerLeft</em>, <em>lowerRight</em>, <em>upperRight</em>, and <em>upperLeft</em> of SoScreen
(see above).</p>
<p></p>
<ul><li><p>[SoSFString] server 4127:4126<br />

 This field specifies a string used to initialize the connection
 to the tracking system. </p>
<p> In order to connect to a running Mechdyne
 trackd daemon, the string should contain the shared memory key
 of the trackd controller data, and the shared memory key of the
 trackd tracker data separated by a colon
 (<tt>"&lt;controllerKey&gt;:&lt;trackerKey&gt;"</tt>). The shared memory keys are
 defined in the trackd.conf file.</p>
<p> In order to connect to a VRPN server, the string should contain
 <tt>vrpn &lt;trackerDeviceName[@host[:port]]&gt; &lt;buttonDeviceName[@host[:port]]&gt;</tt>,
 with tracker and button device names as specified in the <em>vrpn.cfg</em> server
 configuration file. Specifying a host and a port, where a host can be an IP
 address or a DNS hostname, is optional. If no host has been specified Amira will try
 to connect to an VRPN server running on the localhost using the standard VRPN port 3883.</p></li><li>[SoSFBool] autoConnect<br />

 If this field is set to TRUE, the connection to the tracking
 system will be established automatically when the configuration
 is loaded. The default value is FALSE.</li><li>[SoSFVec3f] defaultCameraPosition 90 50 150<br />

 Defines the camera position to be used as long as there is no
 connection to the tracking system. This position is also used
 if the head tracker id (below) is -1.</li><li>[SoSFVec3f] defaultObjectPosition 90 50 0<br />

 Defines the object position to be used as long as there is no
 connection to the tracking system. If there is a "view all" request
 in <font face="helvetica">Amira</font> (e.g., because the space bar of the keyboard was hit), the
 scene is centered at the default object position. In a CAVE it
 makes sense to choose the default object position in the center of
 the front wall.</li><li>[SoMFVec3f] calibration<br />

 The field is used to store calibration data, i.e., data allowing
 the system to transform raw tracker data into the coordinate system
 in which the screens have been defined. Usually there is no need
 to set this field manually. Instead, load a configuration file
 without calibration data, perform calibration in <font face="helvetica">Virtual Reality Option</font>, and then
 export a new config file.</li><li>[SoSFRotation] rotGlasses<br />

 This field is used for calibrating the orientation of the tracked
 stereo glasses. Usually there is no need to set this field
 manually.</li><li>[SoSFRotation] rotWand<br />

 This field is used for calibrating the orientation of the wand
 tracker. Usually there is no need to set this field manually.</li><li>[SoSFVec3f] leftEyeOffset<br />

 The center of the left eye with respect to the head tracker.
 For calibration, the glasses must be align parallel to the
 front screen. In this position the horizontal axis is the x-axis,
 the vertical axis is the y-axis, and the axis pointing towards
 the observer is the z-axis. The eye offsets are defined with
 respect to this coordinate system. The difference between the
 left eye's x-offset and the right eye's x-offset should be
 around 6.5 cm (average eye separation).</li><li>[SoSFVec3f] rightEyeOffset<br />

 The center of the right eye with respect to the head tracker.
 The same remarks as for <em>leftEyeOffset</em> apply.</li><li>[SoMFVec3f] referencePoints<br />

 Reference points used for calibrating the tracking system. If no
 reference points are specified, the user is asked to click at
 the upper left, lower left, and lower right corner of the first
 screen defined in the config file. Note that at least three
 different reference points are required and that these points must
 not lie on a common line. However, the reference points may well
 lie in a common plane, e.g., in the screen plane itself.</li><li>[SoSFInt32] wandTrackerId<br />

 Specifies the id of the trackd sensor which should be used to
 control the wand. By default the wand sensor is assumed to have
 the id 0.</li><li>[SoSFInt32] headTrackerId<br />

 Specifies the id of the trackd sensor which should be used to
 control the camera (head tracking). By default the head tracker 
 is assumed to have the id 1. If -1 is specified for a head tracker
 id, the default camera position is used instead of actually
 querying a head sensor.</li><li>[SoSFInt32] headTrackingEnabled<br />

 This field determines if head tracking should be enabled or
 disabled by default if the configuration file is loaded. The
 default is TRUE. If the value is set to FALSE, head tracking is
 initially disabled, but can be activated later by pressing
 the head tracking toggle of the <font face="helvetica">VRSettings</font> control module. However,
 <em>headTrackerId</em> must not be set to -1 in this case.</li><li>[SoSFString] wandFile<br />

 This is the name of an Open Inventor file which is used as the
 visual representation of the wand. The origin of the wand should
 be at (0,0,0). The wand itself should point into the negative
 z direction. The wand is scaled so that the length 1 corresponds
 to 0.16 times the width of the first screen in the config file.
 The hot spot of the wand should be indicated by an SoInfo node
 containing a string <em>"x y z"</em>. Usually the hot spot will be
 something like <em>"0 0 -1"</em>. The filename can be an absolute
 or relative path. If it is relative, the file is assumed to be in
 the same directory as the config file itself (namely in <em>share/config/vr</em>).</li><li>[SoSFString] highlightWandFile<br />

 This is the name of an Open Inventor file which is used as the
 visual representation of the wand in highlight state. The same
 remarks as for <em>wandFile</em> apply to this field too.</li><li>[SoSFFloat] wandScale<br />

 This field specifies a scaling factor applied to the wand geometry.
 By default, a value of 0.16 times the width of the first screen
 is assumed. In order to change the length of the wand you can
 either specify a custom wand file with a hot spot different from
 <em>"0 0 -1"</em>, or you can change the wand scale value.</li><li>[SoSFVec3f] menuPosition<br />

 Specifies the default position of the upper left corner of the
 3D menu. By default it is placed in the upper left corner of the
 first screen in the config file. The values must be defined in
 the same coordinate system as the corners of the screens.</li><li>[SoSFRotation] menuOrientation<br />

 Specifies the orientation of the 3D menu. By default the horizontal
 axis of the menu, i.e., the text direction, is aligned to the
 x-axis of the VR coordinate system, while the vertical direction
 is aligned to the y-axis. This field allows you to change the
 orientation by applying a rotation to the default orientation. The
 rotation is specified by four numbers. The first three numbers
 define the axis of rotation, and the fourth numbers defines the
 rotation angle in radians.</li><li>[SoSFFloat] menuSize<br />

 This field specifies the default width of the 3D menu in the same
 coordinates in which the corners of the screens were defined.
 You can adjust this value to make the menu smaller or bigger.</li><li>[SoSFString] onLoad<br />

 This field defines a Tcl command which is executed after the
 configuration has been loaded. You can put additional
 initialization code here. For example, you may always want to 
 load a particular script <em>MenuInit.hx</em> for initializing the
 <a class="link" href="HxVR-menu.html#A1">3D menu</a> when a certain configuration is
 loaded. You can do this by defining <em>onLoad "load
 $<tt>AMIRA_ROOT</tt>/MenuInit.hx"</em>.<br />

 As another example you can show 3D menu with:<br />

 onLoad "<font face="helvetica">VRSettings</font> options setValue 2 1"</li><li>[SoSFString] onUnload<br />

 This field defines a Tcl command which is executed before a
 configuration is unloaded.</li><li>[SoSFString] onConnect<br />

 This field defines a Tcl command which is executed after a
 connection to the tracking system has been established.</li><li>[SoSFString] onDisconnect<br />

 This field defines a Tcl command which is executed after the
 connection to the tracking system has been disconnected.</li>
</ul><p></p>
<p></p>
<h4><a name="A4">SoVRProperty</a></h4>
<p>An SoVRProperty node contains general information about the <font face="helvetica">Amira</font> user interface. </p>
<p></p>
<ul><li>[SoSFBool] showSlaveGUI FALSE<br />

 Set TRUE to force the <font face="helvetica">Amira</font> GUI to be displayed on the slaves in cluster 
 mode. Note that this interface is not synchronized from slaves, which 
 means that anything done on one slave will not be forwarded to the others.</li><li>[SoSFBool] showSlaveConsole FALSE<br />

 Set TRUE to force the <font face="helvetica">Amira</font> Console to be displayed on the slaves in cluster 
 mode. Note that this interface is not synchronized from slaves, which 
 means that anything done on one slave will not be forwarded to the others.</li><li>[SoSFBool] showSlaveCursor FALSE<br />

 Set TRUE to display the mouse cursor on the slaves' render areas in cluster 
 mode. However, this is only a "forbidden" type cursor that cannot interact
 with the <font face="helvetica">Amira</font> render area.</li><li>[SoSFBool] keepMasterViewerInsideGUI FALSE<br />

 In a cluster configuration, a screen must be defined on master node for correct synchronization, 
 but this may disturb the user to have its main viewer in a floating window.
 Set the field keepMasterViewerInsideGUI to TRUE to force the main viewer to be kept 
 inside the standard GUI. This flag only has effect on the primary screen of a VR node.</li>
</ul><p></p>
<p></p>
<h4><a name="A5">Configuration tips</a></h4>
<p>Here is a summary of some configuration settings that may be helpful to polish your configuration:</p>
<p><font size="1"></font></p><pre>
#Inventor V2.1 ascii
SoVRProperty {                          
      keepMasterViewerInsideGUI TRUE  # If you want to use a standard 
                                      # viewer on master
}
SoScreen {
      ...                             # Display configuration
      backgroundMode  ...             # For consistent backround across screens
      softEdgeOverlap ...             # Soft-edge region
      softEdgeGamma ...               # Soft-edge blending rate
}
SoTracker {
      ...
      autoConnect TRUE                # Note that tracking systems must be 
                                      # running
      headTrackingEnabled FALSE       # Starts without head tracking (can 
                                      # be activated later)
      wandFile "myWandFile"           # Open Inventor/VRML file for custom 
                                      # wand appearance
      highlightWandFile "myHWandFile" # Highlighted version
      menuPosition 100 100 0          # 
      menuSize 50                     #
      onLoad "..."                    # Custom TCL commands
      onConnect "..."
      onDisconnect "..."
}
Separator {                           # Separator containing "environment 
                                      # scene"
      PointLight {location 0 0 0}     # Useful e.g. in CAVEs 
      Separator {...}                 # Fixed geometry relative to screens
}
</pre><p><font size="1">
</font></p>
<p></p>
<p>
</p></body>
</html>
